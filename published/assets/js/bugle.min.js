nv.utils.windowSize=function(){var a={width:640,height:480};return document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight),a},nv.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(c){"function"==typeof b&&b(c),a(c)}}},nv.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,c){return b.color||a[c%a.length]}:a:nv.utils.defaultColor()},nv.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,c){return b.color||a[c%a.length]}},nv.utils.customTheme=function(a,b,c){b=b||function(a){return a.key},c=c||d3.scale.category20().range();var d=c.length;return function(e){var f=b(e);return d||(d=c.length),"undefined"!=typeof a[f]?"function"==typeof a[f]?a[f]():a[f]:c[--d]}},nv.utils.pjax=function(a,b){function c(c){d3.html(c,function(c){var d=d3.select(b).node();d.parentNode.replaceChild(d3.select(c).select(b).node(),d),nv.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href),c(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&c(d3.event.state)})},nv.utils.calcApproxTextWidth=function(a){if(a instanceof d3.selection){var b=parseInt(a.style("font-size").replace("px","")),c=a.text().length;return c*b*.5}return 0},nv.utils.NaNtoZero=function(a){return"number"!=typeof a||isNaN(a)||null===a||1/0===a?0:a},nv.utils.optionsFunc=function(a){return a&&d3.map(a).forEach(function(a,b){"function"==typeof this[a]&&this[a](b)}.bind(this)),this},nv.models.sparkline=function(){"use strict";function a(i){return i.each(function(a){var i=g-f.left-f.right,o=h-f.top-f.bottom,p=d3.select(this);j.domain(b||d3.extent(a,l)).range(d||[0,i]),k.domain(c||d3.extent(a,m)).range(e||[o,0]);{var q=p.selectAll("g.nv-wrap.nv-sparkline").data([a]),r=q.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");r.append("g"),q.select("g")}q.attr("transform","translate("+f.left+","+f.top+")");var s=q.selectAll("path").data(function(a){return[a]});s.enter().append("path"),s.exit().remove(),s.style("stroke",function(a,b){return a.color||n(a,b)}).attr("d",d3.svg.line().x(function(a,b){return j(l(a,b))}).y(function(a,b){return k(m(a,b))}));var t=q.selectAll("circle.nv-point").data(function(a){function b(b){if(-1!=b){var c=a[b];return c.pointIndex=b,c}return null}var c=a.map(function(a,b){return m(a,b)}),d=b(c.lastIndexOf(k.domain()[1])),e=b(c.indexOf(k.domain()[0])),f=b(c.length-1);return[e,d,f].filter(function(a){return null!=a})});t.enter().append("circle"),t.exit().remove(),t.attr("cx",function(a){return j(l(a,a.pointIndex))}).attr("cy",function(a){return k(m(a,a.pointIndex))}).attr("r",2).attr("class",function(a){return l(a,a.pointIndex)==j.domain()[1]?"nv-point nv-currentValue":m(a,a.pointIndex)==k.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),a}var b,c,d,e,f={top:2,right:0,bottom:2,left:0},g=400,h=32,i=!0,j=d3.scale.linear(),k=d3.scale.linear(),l=function(a){return a.x},m=function(a){return a.y},n=nv.utils.getColor(["#000"]);return a.options=nv.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(f.top="undefined"!=typeof b.top?b.top:f.top,f.right="undefined"!=typeof b.right?b.right:f.right,f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom,f.left="undefined"!=typeof b.left?b.left:f.left,a):f},a.width=function(b){return arguments.length?(g=b,a):g},a.height=function(b){return arguments.length?(h=b,a):h},a.x=function(b){return arguments.length?(l=d3.functor(b),a):l},a.y=function(b){return arguments.length?(m=d3.functor(b),a):m},a.xScale=function(b){return arguments.length?(j=b,a):j},a.yScale=function(b){return arguments.length?(k=b,a):k},a.xDomain=function(c){return arguments.length?(b=c,a):b},a.yDomain=function(b){return arguments.length?(c=b,a):c},a.xRange=function(b){return arguments.length?(d=b,a):d},a.yRange=function(b){return arguments.length?(e=b,a):e},a.animate=function(b){return arguments.length?(i=b,a):i},a.color=function(b){return arguments.length?(n=nv.utils.getColor(b),a):n},a},nv.models.sparklinePlus=function(){"use strict";function a(l){return l.each(function(p){function q(){if(!i){var a=A.selectAll(".nv-hoverValue").data(h),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),a.attr("transform",function(a){return"translate("+b(d.x()(p[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),h.length&&(c.append("line").attr("x1",0).attr("y1",-e.top).attr("x2",0).attr("y2",u),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-e.top).attr("text-anchor","end").attr("dy",".9em"),A.select(".nv-hoverValue .nv-xValue").text(j(d.x()(p[h[0]],h[0]))),c.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-e.top).attr("text-anchor","start").attr("dy",".9em"),A.select(".nv-hoverValue .nv-yValue").text(k(d.y()(p[h[0]],h[0]))))}}function r(){function a(a,b){for(var c=Math.abs(d.x()(a[0],0)-b),e=0,f=0;f<a.length;f++)Math.abs(d.x()(a[f],f)-b)<c&&(c=Math.abs(d.x()(a[f],f)-b),e=f);return e}if(!i){var c=d3.mouse(this)[0]-e.left;h=[a(p,Math.round(b.invert(c)))],q()}}var s=d3.select(this),t=(f||parseInt(s.style("width"))||960)-e.left-e.right,u=(g||parseInt(s.style("height"))||400)-e.top-e.bottom;if(a.update=function(){a(l)},a.container=this,!p||!p.length){var v=s.selectAll(".nv-noData").data([o]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",e.left+t/2).attr("y",e.top+u/2).text(function(a){return a}),a}s.selectAll(".nv-noData").remove();var w=d.y()(p[p.length-1],p.length-1);b=d.xScale(),c=d.yScale();var x=s.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),y=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),z=y.append("g"),A=x.select("g");z.append("g").attr("class","nv-sparklineWrap"),z.append("g").attr("class","nv-valueWrap"),z.append("g").attr("class","nv-hoverArea"),x.attr("transform","translate("+e.left+","+e.top+")");var B=A.select(".nv-sparklineWrap");d.width(t).height(u),B.call(d);var C=A.select(".nv-valueWrap"),D=C.selectAll(".nv-currentValue").data([w]);D.enter().append("text").attr("class","nv-currentValue").attr("dx",n?-8:8).attr("dy",".9em").style("text-anchor",n?"end":"start"),D.attr("x",t+(n?e.right:0)).attr("y",m?function(a){return c(a)}:0).style("fill",d.color()(p[p.length-1],p.length-1)).text(k(w)),z.select(".nv-hoverArea").append("rect").on("mousemove",r).on("click",function(){i=!i}).on("mouseout",function(){h=[],q()}),A.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-e.left+","+-e.top+")"}).attr("width",t+e.left+e.right).attr("height",u+e.top)}),a}var b,c,d=nv.models.sparkline(),e={top:15,right:100,bottom:10,left:50},f=null,g=null,h=[],i=!1,j=d3.format(",r"),k=d3.format(",d"),l=!0,m=!0,n=!1,o="No Data Available.";return a.sparkline=d,d3.rebind(a,d,"x","y","xScale","yScale","color"),a.options=nv.utils.optionsFunc.bind(a),a.margin=function(b){return arguments.length?(e.top="undefined"!=typeof b.top?b.top:e.top,e.right="undefined"!=typeof b.right?b.right:e.right,e.bottom="undefined"!=typeof b.bottom?b.bottom:e.bottom,e.left="undefined"!=typeof b.left?b.left:e.left,a):e},a.width=function(b){return arguments.length?(f=b,a):f},a.height=function(b){return arguments.length?(g=b,a):g},a.xTickFormat=function(b){return arguments.length?(j=b,a):j},a.yTickFormat=function(b){return arguments.length?(k=b,a):k},a.showValue=function(b){return arguments.length?(l=b,a):l},a.alignValue=function(b){return arguments.length?(m=b,a):m},a.rightAlignValue=function(b){return arguments.length?(n=b,a):n},a.noData=function(b){return arguments.length?(o=b,a):o},a},nv.models.legend=function(){"use strict";function a(l){return l.each(function(a){var l=c-b.left-b.right,m=d3.select(this),n=m.selectAll("g.nv-legend").data([a]),o=(n.enter().append("g").attr("class","nvd3 nv-legend").append("g"),n.select("g"));n.attr("transform","translate("+b.left+","+b.top+")");var p=o.selectAll(".nv-series").data(function(a){return a}),q=p.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){k.legendMouseover(a,b)}).on("mouseout",function(a,b){k.legendMouseout(a,b)}).on("click",function(b,c){k.legendClick(b,c),i&&(j?(a.forEach(function(a){a.disabled=!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),k.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,c){k.legendDblclick(b,c),i&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,k.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});if(q.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),q.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),p.classed("disabled",function(a){return a.disabled}),p.exit().remove(),p.select("circle").style("fill",function(a,b){return a.color||f(a,b)}).style("stroke",function(a,b){return a.color||f(a,b)}),p.select("text").text(e),g){var r=[];p.each(function(){var a,b=d3.select(this).select("text");try{a=b.node().getComputedTextLength()}catch(c){a=nv.utils.calcApproxTextWidth(b)}r.push(a+28)});for(var s=0,t=0,u=[];l>t&&s<r.length;)u[s]=r[s],t+=r[s++];for(0===s&&(s=1);t>l&&s>1;){u=[],s--;for(var v=0;v<r.length;v++)r[v]>(u[v%s]||0)&&(u[v%s]=r[v]);t=u.reduce(function(a,b){return a+b})}for(var w=[],x=0,y=0;s>x;x++)w[x]=y,y+=u[x];p.attr("transform",function(a,b){return"translate("+w[b%s]+","+(5+20*Math.floor(b/s))+")"}),h?o.attr("transform","translate("+(c-b.right-t)+","+b.top+")"):o.attr("transform","translate(0,"+b.top+")"),d=b.top+b.bottom+20*Math.ceil(r.length/s)}else{var z,A=5,B=5,C=0;p.attr("transform",function(){var a=d3.select(this).select("text").node().getComputedTextLength()+28;return z=B,c<b.left+b.right+z+a&&(B=z=5,A+=20),B+=a,B>C&&(C=B),"translate("+z+","+A+")"}),o.attr("transform","translate("+(c-b.right-C)+","+b.top+")"),d=b.top+b.bottom+A+15}}),a}var b={top:5,right:0,bottom:5,left:0},c=400,d=20,e=function(a){return a.key},f=nv.utils.defaultColor(),g=!0,h=!0,i=!0,j=!1,k=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return a.dispatch=k,a.options=nv.utils.optionsFunc.bind(a),a.margin=function(c){return arguments.length?(b.top="undefined"!=typeof c.top?c.top:b.top,b.right="undefined"!=typeof c.right?c.right:b.right,b.bottom="undefined"!=typeof c.bottom?c.bottom:b.bottom,b.left="undefined"!=typeof c.left?c.left:b.left,a):b},a.width=function(b){return arguments.length?(c=b,a):c},a.height=function(b){return arguments.length?(d=b,a):d},a.key=function(b){return arguments.length?(e=b,a):e},a.color=function(b){return arguments.length?(f=nv.utils.getColor(b),a):f},a.align=function(b){return arguments.length?(g=b,a):g},a.rightAlign=function(b){return arguments.length?(h=b,a):h},a.updateState=function(b){return arguments.length?(i=b,a):i},a.radioButtonMode=function(b){return arguments.length?(j=b,a):j},a};